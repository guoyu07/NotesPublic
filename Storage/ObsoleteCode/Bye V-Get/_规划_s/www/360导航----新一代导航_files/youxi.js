/*pub-2|2011-12-01 10:37:46*/KISSY.ready(function(a){function p(){f[0].options.length=0,f.append('<option value="">\u8bf7\u9009\u62e9\u6e38\u620f</option>');for(var a in l)f.append('<option value="'+a+'">'+l[a].name+"</option>");f[0].value="",q()}function q(){h[0].options.length=0,h.append('<option value="">\u8bf7\u9009\u62e9\u9762\u503c</option>');var a=f.val();if(a!=""){var b=l[a].price,c=l[a].price_vid;for(var d=0;d<b.length;d++)h.append('<option value="'+c[d]+'">'+b[d]+"</option>")}h[0].value=""}function r(){e.html("\u6e38\u620f:"),g.html("\u9762\u503c:");if(l){p();return}a.io({dataType:"jsonp",url:taokeUrl+"chongzhi/dian_ka_list.do",jsonp:"callback",success:function(a){l=a.data,p()}})}function s(){f[0].options.length=0,f.append('<option value="">\u8bf7\u9009\u62e9\u7c7b\u578b</option>');for(var a in m)f.append('<option value="'+a+'">'+m[a].name+"</option>");f[0].value="",t()}function t(){h[0].options.length=0,h.append('<option value="">\u8bf7\u9009\u62e9\u9762\u503c</option>');var a=f.val();if(a!=""){var b=m[a].price,c=m[a].price_vid;for(var d=0;d<b.length;d++)h.append('<option value="'+c[d]+'">'+b[d]+"</option>")}h[0].value=""}function u(){e.html("\u79cd\u7c7b:"),g.html("\u9762\u503c:");if(m){s();return}a.io({dataType:"jsonp",url:taokeUrl+"chongzhi/qq_list.do",jsonp:"callback",success:function(a){m=a.data,s()}})}function v(){f[0].options.length=0,f.append('<option value="">\u8bf7\u9009\u62e9\u7c7b\u578b</option>');for(var a in n)f.append('<option value="'+a+'">'+n[a].name+"</option>");f[0].value="",w()}function w(){h[0].options.length=0,h.append('<option value="">\u8bf7\u9009\u62e9\u7269\u54c1</option>');var a=f.val();if(a!=""){var b=n[a].goods,c=n[a].pidvid;for(var d=0;d<b.length;d++)h.append('<option value="'+c[d]+'">'+b[d]+"</option>")}h[0].value=""}function x(){e.html("\u6e38\u620f:"),g.html("\u7269\u54c1:");if(n){v();return}a.io({dataType:"jsonp",url:taokeUrl+"chongzhi/hot_games.do",jsonp:"callback",success:function(a){n=a.data,v()}})}var b=a.one("#card"),c=a.one("#gold"),d=a.one("#game"),e=a.one("#J_labelType"),f=a.one("#J_selectType"),g=a.one("#J_labelPrice"),h=a.one("#J_selectPrice"),i=a.one("#J_youxiPrice"),j=a.one("#J_price_container"),k=a.one("#J_youxiSubmitBtn"),l=window.gamecard,m=window.qqcard,n=window.hotgame,o="card";b.on("click",function(a){i.html("\u6682\u7f3a"),k.attr("href","#"),k[0].className="tel-submit",j.css("display","block"),o="card",r()}),c.on("click",function(a){i.html("\u6682\u7f3a"),k.attr("href","#"),k[0].className="tel-submit",j.css("display","block"),o="gold",u()}),d.on("click",function(a){i.html("\u6682\u7f3a"),k.attr("href","#"),k[0].className="tel-discount",j.css("display","none"),o="game",x()}),k.on("click",function(a){if(k.attr("href")=="#"){switch(o){case"card":alert("\u8bf7\u9009\u62e9\u6e38\u620f\u548c\u9762\u503c");break;case"gold":alert("\u8bf7\u9009\u62e9\u7c7b\u578b\u548c\u9762\u503c");break;case"game":alert("\u8bf7\u9009\u62e9\u6e38\u620f\u548c\u7269\u54c1")}a.halt()}}),h.on("change",function(){var b="",c=null,d=f[0].value,e=0,g=h[0].value,j=0;switch(o){case"card":b=taokeUrl+"chongzhi/dian_ka.do",e=l[d].price_id,j=l[d].service_id,c={cat_id:d,price_id:e,price_vid:g,mm_id:pid,service_id:j};break;case"gold":b=taokeUrl+"chongzhi/qq_card.do",e=m[d].price_id,j=m[d].service_id,c={cat_id:d,price_id:e,price_vid:g,mm_id:pid,service_id:j};break;case"game":b=taokeUrl+"chongzhi/game_goods_submit.do",c={cat_id:d,pidvid:g,mm_id:pid}}window.uid&&(c.u=uid),a.io({dataType:"jsonp",url:b,data:c,jsonp:"callback",success:function(a){a.success?(a.price&&i.html(a.price+"\u5143"),k.attr("href",a.click_url)):(i.html("\u6682\u7f3a"),k.attr("href","#"))}})}),f.on("change",function(){i.html("\u6682\u7f3a"),k.attr("href","#");switch(o){case"card":q();break;case"gold":t();break;case"game":w()}}),b.attr("checked")?r():c.attr("checked")?(u(),o="gold"):(j.css("display","none"),k[0].className="tel-discount",x(),o="game")});