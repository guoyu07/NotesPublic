/*pub-1|2012-06-19 10:47:46*/KISSY.add(function(B){var C=B.DOM,A=B.Event,D=B.all;function F(I,G){var H=this;this.cfg=G;if(!(H instanceof F)){return new F(I,G)}H.selManager=new E();B.each(I,function(K,J){K=C.get(K);if(K){H.selManager.add(K);A.on(K,"change",function(L){H._change(J)})}});this._render(H.selManager.get(0),0);this._forward(0)}B.augment(F,B.EventTarget,{getCurDate:function(){var H=D(this.selManager.get(0)).val();var I=D(this.selManager.get(1)).val();var G=D(this.selManager.get(2)).val();return new Date(H+"/"+I+"/"+G)},_getDate:function(K){var O=this;var M=moment(O.cfg.curDate||new Date());switch(K){case 0:return{min:M.year(),max:M.year()+1,cur:M.year()};case 1:var H=D(O.selManager.get(1)).val();return{min:1,max:12,cur:H?H:M.month()+1};case 2:var N=D(O.selManager.get(0)).val();var H=D(O.selManager.get(1)).val();var J=D(O.selManager.get(2)).val();var L=J?moment([N,H-1]):moment(O.cfg.curDate||new Date());var I=L.date();var G=L.daysInMonth();return{min:1,max:G,cur:I}}},_forward:function(J){var H=this,I=H.selManager.get(J);if(I){var G=H.selManager.get(J+1);if(G){H._render(G,J+1)}else{return }H._forward(J+1)}else{return }},_change:function(H){this._forward(H);var I=D(this.selManager.get(0)).val();var J=D(this.selManager.get(1)).val();var G=D(this.selManager.get(2)).val();this.fire("change",{date:new Date(I+"/"+J+"/"+G)})},_render:function(K,I){var G=this,L=K,H=G._getDate(I);if(!L){return }L.options.length=0;for(var J=H.min;J<=H.max;J++){L.options[L.options.length]=new Option(J,J,(J==H.cur?true:false),(J==H.cur?true:false))}}});function E(){var G=[];this.add=function(I){var H=G.length;G[H]=I;return G[H]};this.get=function(H){if(B.isNumber(H)&&H<=G.length){return G[H]}}}return F});