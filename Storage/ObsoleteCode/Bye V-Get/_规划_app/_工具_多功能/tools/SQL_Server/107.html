<meta http-equiv="content-type" content="text/html; charset=gb2312">
<BLOCKQUOTE><IMG alt=发贴心情 src="http://www.pigtwo.com/forum/face/face0.gif" border=0>&nbsp;<FONT 
style="FONT-SIZE: 9pt; LINE-HEIGHT: 15pt"><B></B><BR>理解日志截断选项<BR>不同的备份日志截断选项经常被DBA新手所忽视。DBA新手通常并不知道选项存在或了解它们的作用。怎样使用或什么时候时候它们，以下的几小节详细解释每个选项的作用以及在什么时候使用它。<BR>&nbsp;&nbsp;&nbsp;&nbsp;TRUNCATE_ONLY<BR>TRUNCATE_ONLY选项截掉事务日志的非活动部分，而不备份（拷贝）日志到备份设备上。因为日志没有拷贝，所以在使用TRUNCATE_ONLY时，不必指明备份设备。例如，用TRUNCATE_ONLY选项备份主数据库事务日志的语法如下：<BR>Backup&nbsp;Log&nbsp;master<BR>WITH&nbsp;TRUNCATE_ONLY<BR>在以下情况下使用TRUNCATE_ONLY：<BR>如果你不是为了恢复目的使用事务日志，并且依赖于完整数据库备份（完整或差异）。如果没有执行数据库备份就使用TRUNCATE_ONLY选项，你将不能在带有TRUNCATE_ONLY的BACKUP&nbsp;LOG命令执行时，恢复事务日志非活动部分的已完成事务。<BR>NO_LOG<BR>当有NO_LOG选项的BACKUP&nbsp;LOG命令执行时，SQL&nbsp;SERVER不记录BACKUP&nbsp;LOG命令，就截断事务日志的非活动部分。<BR>仅当事务日志完全填满时才使用NO_LOG选项，当日志完全填满时，你不能通过执行一条普通的BACKUP&nbsp;LOG命令来截断事务日志。这样是因为SQL&nbsp;SERVER试图记录BACKUP命令，而在事务日志中却没有剩余空间。和TRUNCATE_ONLY选项一样，NO_LOG选项不需要备份设备，因为日志并不拷贝到设备上去。<BR>NO_TRUNCATE<BR>当你试图进入的数据库被破坏并打算恢复数据库时，使用NO_TRUNCATE选项。要使用NO_TRUNCATE，必须满足以下条件：<BR>事务日志必须和数据库在不同的设备上。<BR>MASTER数据库必须没有被破坏<BR>NO_TRUNCATE记录从最近一次事务日志备份，到数据库破坏点的所有事务日志项。然后恢复事务日志备份作为最近一次备份，它在恢复过程中，可精确到毫秒级。</FONT></BLOCKQUOTE>