<meta http-equiv="content-type" content="text/html; charset=gb2312">&nbsp;<FONT 
style="FONT-SIZE: 9pt; LINE-HEIGHT: 15pt"><B>default当前的用户</B><BR><B>SESSION_USER</B><BR>是一个&nbsp;niladic&nbsp;函数，允许在未指定默认值时将系统为当前会话的用户名提供的值插入到表中。还允许在查询、错误信息等中使用用户名。
<P></P>
<P>语法<BR>SESSION_USER</P>
<P>返回类型<BR>nchar</P>
<P>注释<BR>SESSION_USER&nbsp;可在&nbsp;CREATE&nbsp;TABLE&nbsp;或&nbsp;ALTER&nbsp;TABLE&nbsp;语句中与&nbsp;DEFAULT&nbsp;约束一起使用，或者用作任何标准函数。</P>
<P>示例<BR>A.&nbsp;使用&nbsp;SESSION_USER&nbsp;返回会话的当前用户名<BR>下例声明一个&nbsp;char&nbsp;类型的变量，并将&nbsp;SESSION_USER&nbsp;赋为当前值，然后输出该变量并带有文本描述。</P>
<P>DECLARE&nbsp;@session_usr&nbsp;char(30)<BR>SET&nbsp;@session_usr&nbsp;=&nbsp;SESSION_USER<BR>SELECT&nbsp;''This&nbsp;session''''s&nbsp;current&nbsp;user&nbsp;is:&nbsp;''+&nbsp;@session_usr<BR>GO</P>
<P>下面是结果集：</P>
<P>--------------------------------------------------------------&nbsp;<BR>This&nbsp;session''s&nbsp;current&nbsp;user&nbsp;is:&nbsp;dbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P>
<P>(1&nbsp;row(s)&nbsp;affected)</P>
<P>B.&nbsp;将&nbsp;SESSION_USER&nbsp;与&nbsp;DEFAULT&nbsp;约束一起使用<BR>下例将&nbsp;SESSION_USER&nbsp;niladic&nbsp;函数用作&nbsp;DEFAULT&nbsp;约束为交货人创建表。</P>
<P>USE&nbsp;pubs<BR>GO<BR>CREATE&nbsp;TABLE&nbsp;deliveries2<BR>(<BR>&nbsp;order_id&nbsp;int&nbsp;IDENTITY(5000,&nbsp;1)&nbsp;NOT&nbsp;NULL,<BR>&nbsp;cust_id&nbsp;&nbsp;int&nbsp;NOT&nbsp;NULL,<BR>&nbsp;order_date&nbsp;datetime&nbsp;NOT&nbsp;NULL&nbsp;DEFAULT&nbsp;GETDATE(),<BR>&nbsp;delivery_date&nbsp;datetime&nbsp;NOT&nbsp;NULL&nbsp;DEFAULT&nbsp;DATEADD(dd,&nbsp;10,&nbsp;GETDATE()),<BR>&nbsp;delivery_person&nbsp;char(30)&nbsp;NOT&nbsp;NULL&nbsp;DEFAULT&nbsp;SESSION_USER<BR>)<BR>GO<BR>INSERT&nbsp;deliveries2&nbsp;(cust_id)<BR>valueS&nbsp;(7510)<BR>INSERT&nbsp;deliveries2&nbsp;(cust_id)<BR>valueS&nbsp;(7231)<BR>INSERT&nbsp;deliveries2&nbsp;(cust_id)<BR>valueS&nbsp;(7028)<BR>INSERT&nbsp;deliveries2&nbsp;(cust_id)<BR>valueS&nbsp;(7392)<BR>INSERT&nbsp;deliveries2&nbsp;(cust_id)<BR>valueS&nbsp;(7452)<BR>GO</P>
<P>以下查询选择&nbsp;deliveries2&nbsp;表中的全部信息。</P>
<P>SELECT&nbsp;order_id&nbsp;AS&nbsp;''Ord#'',&nbsp;cust_id&nbsp;AS&nbsp;''Cust#'',&nbsp;order_date,&nbsp;<BR>&nbsp;&nbsp;&nbsp;delivery_date,&nbsp;delivery_person&nbsp;AS&nbsp;''Delivery''<BR>FROM&nbsp;deliveries2<BR>ORDER&nbsp;BY&nbsp;order_id<BR>GO</P>
<P>下面是结果集：</P>
<P>Ord#&nbsp;&nbsp;Cust#&nbsp;&nbsp;order_date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delivery_date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delivery&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>----&nbsp;&nbsp;------&nbsp;------------------&nbsp;&nbsp;--------------------&nbsp;----------------<BR>5000&nbsp;&nbsp;7510&nbsp;&nbsp;&nbsp;Mar&nbsp;4&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;Mar&nbsp;14&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;dbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>5001&nbsp;&nbsp;7231&nbsp;&nbsp;&nbsp;Mar&nbsp;4&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;Mar&nbsp;14&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;dbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>5002&nbsp;&nbsp;7028&nbsp;&nbsp;&nbsp;Mar&nbsp;4&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;Mar&nbsp;14&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;dbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>5003&nbsp;&nbsp;7392&nbsp;&nbsp;&nbsp;Mar&nbsp;4&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;Mar&nbsp;14&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;dbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>5004&nbsp;&nbsp;7452&nbsp;&nbsp;&nbsp;Mar&nbsp;4&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;Mar&nbsp;14&nbsp;1998&nbsp;10:21AM&nbsp;&nbsp;dbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P>
<P>(5&nbsp;row(s)&nbsp;affected)</P>
<P><B>CURRENT_USER</B><BR>返回当前的用户。此函数等价于&nbsp;USER_NAME()。</P>
<P>语法<BR>CURRENT_USER</P>
<P>返回类型<BR>sysname</P>
<P>示例<BR>A.&nbsp;使用&nbsp;CURRENT_USER&nbsp;返回当前的用户名<BR>下面的示例将一个变量声明为&nbsp;char，并将&nbsp;CURRENT_USER&nbsp;的当前值指派给它，然后返回该变量，返回时还带有一个文本描述。</P>
<P>SELECT&nbsp;''The&nbsp;current&nbsp;user&nbsp;is:&nbsp;''+&nbsp;convert(char(30),&nbsp;CURRENT_USER)</P>
<P>下面是结果集：</P>
<P>---------------------------------------------------&nbsp;<BR>The&nbsp;current&nbsp;user&nbsp;is:&nbsp;dbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P>
<P>(1&nbsp;row(s)&nbsp;affected)</P>
<P>B.&nbsp;将&nbsp;CURRENT_USER&nbsp;用作&nbsp;DEFAULT&nbsp;约束<BR>下面的示例创建一个表，该表针对销售行的&nbsp;order_person&nbsp;列将&nbsp;CURRENT_USER&nbsp;用作&nbsp;DEFAULT&nbsp;约束。</P>
<P>USE&nbsp;pubs<BR>IF&nbsp;EXISTS&nbsp;(SELECT&nbsp;TABLE_NAME&nbsp;FROM&nbsp;INFORMATION_SCHEMA.TABLES<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE&nbsp;TABLE_NAME&nbsp;=&nbsp;''orders2'')<BR>&nbsp;&nbsp;&nbsp;DROP&nbsp;TABLE&nbsp;orders2<BR>GO<BR>SET&nbsp;NOCOUNT&nbsp;ON<BR>CREATE&nbsp;TABLE&nbsp;orders2<BR>(<BR>&nbsp;order_id&nbsp;int&nbsp;IDENTITY(1000,&nbsp;1)&nbsp;NOT&nbsp;NULL,<BR>&nbsp;cust_id&nbsp;&nbsp;int&nbsp;NOT&nbsp;NULL,<BR>&nbsp;order_date&nbsp;datetime&nbsp;NOT&nbsp;NULL&nbsp;DEFAULT&nbsp;GETDATE(),<BR>&nbsp;order_amt&nbsp;money&nbsp;NOT&nbsp;NULL,<BR>&nbsp;order_person&nbsp;char(30)&nbsp;NOT&nbsp;NULL&nbsp;DEFAULT&nbsp;CURRENT_USER<BR>)<BR>GO<BR>INSERT&nbsp;orders2&nbsp;(cust_id,&nbsp;order_amt)<BR>valueS&nbsp;(5105,&nbsp;577.95)<BR>GO<BR>SET&nbsp;NOCOUNT&nbsp;OFF</P>
<P>下面的查询从&nbsp;orders2&nbsp;表中选择所有信息。</P>
<P>SELECT&nbsp;*&nbsp;<BR>FROM&nbsp;orders2</P>
<P>下面是结果集：</P>
<P>order_id&nbsp;&nbsp;&nbsp;&nbsp;cust_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order_date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;order_amt&nbsp;&nbsp;&nbsp;&nbsp;order_person&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<BR>-----------&nbsp;-----------&nbsp;-------------------&nbsp;-------------&nbsp;--------------&nbsp;<BR>1000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5105&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mar&nbsp;4&nbsp;1998&nbsp;10:13AM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;577.95&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dbo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</P>
<P>(1&nbsp;row(s)&nbsp;affected)</P></FONT>