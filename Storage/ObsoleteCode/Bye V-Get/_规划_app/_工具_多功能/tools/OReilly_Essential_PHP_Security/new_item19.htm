<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>


   <title>2.3. &#25991;&#20214;&#19978;&#20256;&#25915;&#20987;</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#649CCC">
  <tr valign="middle">
    <td align="left">
      <p class="p_Heading1"><span class="f_Heading1">2.3. &#25991;&#20214;&#19978;&#20256;&#25915;&#20987;</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="introduction.htm">Top</a>&nbsp;
     <a href="new_item18.htm">Previous</a>&nbsp;
     <a href="new_item20.htm">Next</a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p style="line-height: 1.50;">2.3. &#25991;&#20214;&#19978;&#20256;&#25915;&#20987;</p>
<p style="line-height: 1.50;">  &nbsp; &#26377;&#26102;&#22312;&#38500;&#20102;&#26631;&#20934;&#30340;&#34920;&#21333;&#25968;&#25454;&#22806;&#65292;&#20320;&#36824;&#38656;&#35201;&#35753;&#29992;&#25143;&#36827;&#34892;&#25991;&#20214;&#19978;&#20256;&#12290;&#30001;&#20110;&#25991;&#20214;&#22312;&#34920;&#21333;&#20013;&#20256;&#36865;&#26102;&#19982;&#20854;&#23427;&#30340;&#34920;&#21333;&#25968;&#25454;&#19981;&#21516;&#65292;&#20320;&#24517;&#39035;&#25351;&#23450;&#19968;&#20010;&#29305;&#21035;&#30340;&#32534;&#30721;&#26041;&#24335;multipart/form-data&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">&lt;form action="upload.php" method="POST" enctype="multipart/form-data"&gt;</p>
<p style="line-height: 1.50;">&#19968;&#20010;&#21516;&#26102;&#26377;&#26222;&#36890;&#34920;&#21333;&#25968;&#25454;&#21644;&#25991;&#20214;&#30340;&#34920;&#21333;&#26159;&#19968;&#20010;&#29305;&#27530;&#30340;&#26684;&#24335;&#65292;&#32780;&#25351;&#23450;&#32534;&#30721;&#26041;&#24335;&#21487;&#20197;&#20351;&#27983;&#35272;&#22120;&#33021;&#25353;&#35813;&#21487;&#26684;&#24335;&#30340;&#35201;&#27714;&#21435;&#22788;&#29702;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; &#20801;&#35768;&#29992;&#25143;&#36827;&#34892;&#36873;&#25321;&#25991;&#20214;&#24182;&#19978;&#20256;&#30340;&#34920;&#21333;&#20803;&#32032;&#26159;&#24456;&#31616;&#21333;&#30340;&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">&lt;input type="file" name="attachment" /&gt;</p>
<p style="line-height: 1.50;">&#35813;&#20803;&#32032;&#22312;&#21508;&#31181;&#27983;&#35272;&#22120;&#20013;&#30340;&#22806;&#35266;&#34920;&#29616;&#24418;&#24335;&#21508;&#26377;&#19981;&#21516;&#12290;&#20256;&#32479;&#19978;&#65292;&#30028;&#38754;&#19978;&#21253;&#25324;&#19968;&#20010;&#26631;&#20934;&#30340;&#25991;&#26412;&#26694;&#21450;&#19968;&#20010;&#27983;&#35272;&#25353;&#38062;&#65292;&#20197;&#20351;&#29992;&#25143;&#33021;&#30452;&#25509;&#25163;&#24037;&#24405;&#20837;&#25991;&#20214;&#30340;&#36335;&#24452;&#25110;&#36890;&#36807;&#27983;&#35272;&#36873;&#25321;&#12290;&#22312;Safari&#27983;&#35272;&#22120;&#20013;&#21482;&#26377;&#27983;&#35272;&#25353;&#38062;&#12290;&#24184;&#36816;&#30340;&#26159;&#65292;&#23427;&#20204;&#30340;&#20316;&#29992;&#19982;&#34892;&#20026;&#26159;&#30456;&#21516;&#30340;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; &#20026;&#20102;&#26356;&#22909;&#22320;&#28436;&#31034;&#25991;&#20214;&#19978;&#20256;&#26426;&#21046;&#65292;&#19979;&#38754;&#26159;&#19968;&#20010;&#20801;&#35768;&#29992;&#25143;&#19978;&#20256;&#38468;&#20214;&#30340;&#20363;&#23376;&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;form action="upload.php" method="POST" enctype="multipart/form-data"&gt;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;p&gt;Please choose a file to upload:</p>
<p style="line-height: 1.50;">  &nbsp; &lt;input type="hidden" name="MAX_FILE_SIZE" value="1024" /&gt;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;input type="file" name="attachment" /&gt;&lt;br /&gt;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;input type="submit" value="Upload Attachment" /&gt;&lt;/p&gt;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;/form&gt;</p>
<p style="line-height: 1.50;">&#38544;&#34255;&#30340;&#34920;&#21333;&#21464;&#37327;MAX_FILE_SIZE&#21578;&#35785;&#20102;&#27983;&#35272;&#22120;&#26368;&#22823;&#20801;&#35768;&#19978;&#20256;&#30340;&#25991;&#20214;&#22823;&#23567;&#12290;&#19982;&#24456;&#22810;&#23458;&#25143;&#31471;&#38480;&#21046;&#30456;&#21516;&#65292;&#36825;&#19968;&#38480;&#21046;&#24456;&#23481;&#26131;&#34987;&#25915;&#20987;&#32773;&#32469;&#24320;&#65292;&#20294;&#23427;&#21487;&#20197;&#20026;&#21512;&#27861;&#29992;&#25143;&#25552;&#20379;&#21521;&#23548;&#12290;&#22312;&#26381;&#21153;&#22120;&#19978;&#36827;&#34892;&#35813;&#38480;&#21046;&#25165;&#26159;&#21487;&#38752;&#30340;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; PHP&#30340;&#37197;&#32622;&#21464;&#37327;&#20013;&#65292;upload_max_filesize&#25511;&#21046;&#26368;&#22823;&#20801;&#35768;&#19978;&#20256;&#30340;&#25991;&#20214;&#22823;&#23567;&#12290;&#21516;&#26102;post_max_size&#65288;POST&#34920;&#21333;&#30340;&#26368;&#22823;&#25552;&#20132;&#25968;&#25454;&#30340;&#22823;&#23567;&#65289;&#20063;&#33021;&#28508;&#22312;&#22320;&#36827;&#34892;&#25511;&#21046;&#65292;&#22240;&#20026;&#25991;&#20214;&#26159;&#36890;&#36807;&#34920;&#21333;&#25968;&#25454;&#36827;&#34892;&#19978;&#20256;&#30340;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; &#25509;&#25910;&#31243;&#24207;upload.php&#26174;&#31034;&#20102;&#36229;&#32423;&#20840;&#23616;&#25968;&#32452;$_FILES&#30340;&#20869;&#23481;&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp;&lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; header('Content-Type: text/plain');</p>
<p style="line-height: 1.50;">  &nbsp; print_r($_FILES);</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&#20026;&#20102;&#29702;&#35299;&#19978;&#20256;&#30340;&#36807;&#31243;&#65292;&#25105;&#20204;&#20351;&#29992;&#19968;&#20010;&#21517;&#20026;author.txt&#30340;&#25991;&#20214;&#36827;&#34892;&#27979;&#35797;&#65292;&#19979;&#38754;&#26159;&#23427;&#30340;&#20869;&#23481;&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; Chris Shiflett</p>
<p style="line-height: 1.50;">  &nbsp; http://shiflett.org/</p>
<p style="line-height: 1.50;">&#24403;&#20320;&#19978;&#20256;&#35813;&#25991;&#20214;&#21040;upload.php&#31243;&#24207;&#26102;&#65292;&#20320;&#21487;&#20197;&#22312;&#27983;&#35272;&#22120;&#20013;&#30475;&#21040;&#31867;&#20284;&#19979;&#38754;&#30340;&#36755;&#20986;&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; Array</p>
<p style="line-height: 1.50;">  &nbsp; (</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; &nbsp; [attachment] =&gt; Array</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; (</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [name] =&gt; author.txt</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [type] =&gt; text/plain</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [tmp_name] =&gt; /tmp/phpShfltt</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [error] =&gt; 0</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [size] =&gt; 36</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; )</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; )</p>
<p style="line-height: 1.50;">  &nbsp;&#34429;&#28982;&#20174;&#19978;&#38754;&#21487;&#20197;&#30475;&#20986;PHP&#23454;&#38469;&#22312;&#36229;&#32423;&#20840;&#23616;&#25968;&#32452;$_FILES&#20013;&#25552;&#20379;&#30340;&#20869;&#23481;&#65292;&#20294;&#26159;&#23427;&#26080;&#27861;&#32473;&#20986;&#34920;&#21333;&#25968;&#25454;&#30340;&#21407;&#22987;&#20449;&#24687;&#12290;&#20316;&#20026;&#19968;&#20010;&#20851;&#27880;&#23433;&#20840;&#30340;&#24320;&#21457;&#32773;&#65292;&#38656;&#35201;&#35782;&#21035;&#36755;&#20837;&#20197;&#30693;&#36947;&#27983;&#35272;&#22120;&#23454;&#38469;&#21457;&#36865;&#20102;&#20160;&#20040;&#65292;&#30475;&#19968;&#19979;&#19979;&#38754;&#30340;HTTP&#35831;&#27714;&#20449;&#24687;&#26159;&#24456;&#26377;&#24517;&#35201;&#30340;&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp;POST /upload.php HTTP/1.1</p>
<p style="line-height: 1.50;">  &nbsp; Host: example.org</p>
<p style="line-height: 1.50;">  &nbsp; Content-Type: multipart/form-data; boundary=----------12345</p>
<p style="line-height: 1.50;">  &nbsp; Content-Length: 245</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ----------12345</p>
<p style="line-height: 1.50;">  &nbsp; Content-Disposition: form-data; name="attachment"; filename="author.txt"</p>
<p style="line-height: 1.50;">  &nbsp; Content-Type: text/plain</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; Chris Shiflett</p>
<p style="line-height: 1.50;">  &nbsp; http://shiflett.org/</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ----------12345</p>
<p style="line-height: 1.50;">  &nbsp; Content-Disposition: form-data; name="MAX_FILE_SIZE"</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; 1024</p>
<p style="line-height: 1.50;">  &nbsp; ----------12345--</p>
<p style="line-height: 1.50;">&#34429;&#28982;&#20320;&#27809;&#26377;&#24517;&#35201;&#29702;&#35299;&#35831;&#27714;&#30340;&#26684;&#24335;&#65292;&#20294;&#26159;&#20320;&#35201;&#33021;&#35782;&#21035;&#20986;&#25991;&#20214;&#21450;&#30456;&#20851;&#30340;&#20803;&#25968;&#25454;&#12290;&#29992;&#25143;&#21482;&#25552;&#20379;&#20102;&#21517;&#31216;&#19982;&#31867;&#22411;&#65292;&#22240;&#27492;tmp_name&#65292;error&#21450;size&#37117;&#26159;PHP&#25152;&#25552;&#20379;&#30340;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; &#30001;&#20110;PHP&#22312;&#25991;&#20214;&#31995;&#32479;&#30340;&#20020;&#26102;&#25991;&#20214;&#21306;&#20445;&#23384;&#19978;&#20256;&#30340;&#25991;&#20214;&#65288;&#26412;&#20363;&#20013;&#26159;/tmp/phpShfltt&#65289;&#65292;&#25152;&#20197;&#36890;&#24120;&#36827;&#34892;&#30340;&#25805;&#20316;&#26159;&#25226;&#23427;&#31227;&#21040;&#20854;&#23427;&#22320;&#26041;&#36827;&#34892;&#20445;&#23384;&#21450;&#35835;&#21462;&#21040;&#20869;&#23384;&#12290;&#22914;&#26524;&#20320;&#19981;&#23545;tmp_name&#20316;&#26816;&#26597;&#20197;&#30830;&#20445;&#23427;&#26159;&#19968;&#20010;&#19978;&#20256;&#30340;&#25991;&#20214;&#65288;&#32780;&#19981;&#26159;/etc/passwd&#20043;&#31867;&#30340;&#19996;&#35199;&#65289;&#65292;&#23384;&#22312;&#19968;&#20010;&#29702;&#35770;&#19978;&#30340;&#39118;&#38505;&#12290;&#20043;&#25152;&#20197;&#21483;&#29702;&#35770;&#19978;&#30340;&#39118;&#38505;&#65292;&#26159;&#22240;&#20026;&#27809;&#26377;&#19968;&#31181;&#24050;&#30693;&#30340;&#25915;&#20987;&#25163;&#27573;&#20801;&#35768;&#25915;&#20987;&#32773;&#21435;&#20462;&#25913;tmp_name&#30340;&#20540;&#12290;&#20294;&#26159;&#65292;&#27809;&#26377;&#25915;&#20987;&#25163;&#27573;&#24182;&#19981;&#24847;&#21619;&#30528;&#20320;&#19981;&#38656;&#35201;&#20570;&#19968;&#20123;&#31616;&#21333;&#30340;&#23433;&#20840;&#25514;&#26045;&#12290;&#26032;&#30340;&#25915;&#20987;&#25163;&#27573;&#27599;&#22825;&#22312;&#20986;&#29616;&#65292;&#32780;&#31616;&#21333;&#30340;&#19968;&#20010;&#27493;&#39588;&#33021;&#20445;&#25252;&#20320;&#30340;&#31995;&#32479;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; PHP&#25552;&#20379;&#20102;&#20004;&#20010;&#26041;&#20415;&#30340;&#20989;&#25968;&#20197;&#20943;&#36731;&#36825;&#20123;&#29702;&#35770;&#19978;&#30340;&#39118;&#38505;&#65306;is_uploaded_file( ) and move_uploaded_file( )&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;&#30830;&#20445;tmp_name&#20013;&#30340;&#25991;&#20214;&#26159;&#19968;&#20010;&#19978;&#20256;&#30340;&#25991;&#20214;&#65292;&#20320;&#21487;&#20197;&#29992;is_uploaded_file( )&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $filename = $_FILES['attachment']['tmp_name'];</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; if (is_uploaded_file($filename))</p>
<p style="line-height: 1.50;">  &nbsp; {</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; /* $_FILES['attachment']['tmp_name'] is an uploaded file. */</p>
<p style="line-height: 1.50;">  &nbsp; }</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&#22914;&#26524;&#20320;&#24076;&#26395;&#21482;&#25226;&#19978;&#20256;&#30340;&#25991;&#20214;&#31227;&#21040;&#19968;&#20010;&#22266;&#23450;&#20301;&#32622;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;move_uploaded_file( )&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp;&lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $old_filename = $_FILES['attachment']['tmp_name'];</p>
<p style="line-height: 1.50;">  &nbsp; $new_filename = '/path/to/attachment.txt';</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; if (move_uploaded_file($old_filename, $new_filename))</p>
<p style="line-height: 1.50;">  &nbsp; {</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; /* $old_filename is an uploaded file, and the move was successful. */</p>
<p style="line-height: 1.50;">  &nbsp; }</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&#26368;&#21518;&#20320;&#21487;&#20197;&#29992; filesize( ) &#26469;&#26657;&#39564;&#25991;&#20214;&#30340;&#22823;&#23567;&#65306;</p>
<p style="line-height: 1.50;">CODE:</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $filename = $_FILES['attachment']['tmp_name'];</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; if (is_uploaded_file($filename))</p>
<p style="line-height: 1.50;">  &nbsp; {</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; $size = filesize($filename);</p>
<p style="line-height: 1.50;">  &nbsp; }</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&#36825;&#20123;&#23433;&#20840;&#25514;&#26045;&#30340;&#30446;&#30340;&#26159;&#21152;&#19978;&#19968;&#23618;&#39069;&#22806;&#30340;&#23433;&#20840;&#20445;&#25252;&#23618;&#12290;&#26368;&#20339;&#30340;&#26041;&#27861;&#26159;&#27704;&#36828;&#23613;&#21487;&#33021;&#23569;&#22320;&#21435;&#20449;&#20219;&#12290; </p>
<p style="line-height: 1.50;">&nbsp;</p>
<hr noshade size=1 ><p style="line-height: 1.50;">&nbsp;</p>

</td></tr></table>

</body>
</html>
