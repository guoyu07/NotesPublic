<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>


   <title>5.3. &#25991;&#20214;&#21517;&#25805;&#32437;</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#649CCC">
  <tr valign="middle">
    <td align="left">
      <p class="p_Heading1"><span class="f_Heading1">5.3. &#25991;&#20214;&#21517;&#25805;&#32437;</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="introduction.htm">Top</a>&nbsp;
     <a href="new_item35.htm">Previous</a>&nbsp;
     <a href="new_item37.htm">Next</a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p style="line-height: 1.50;">5.3. &#25991;&#20214;&#21517;&#25805;&#32437;</p>
<p style="line-height: 1.50;">  &nbsp; &#22312;&#24456;&#22810;&#24773;&#24418;&#19979;&#20250;&#20351;&#29992;&#21160;&#24577;&#21253;&#21547;&#65292;&#27492;&#26102;&#30446;&#24405;&#21517;&#25110;&#25991;&#20214;&#21517;&#20013;&#30340;&#37096;&#20998;&#20250;&#20445;&#23384;&#22312;&#19968;&#20010;&#21464;&#37327;&#20013;&#12290;&#20363;&#22914;&#65292;&#20320;&#21487;&#20197;&#32531;&#23384;&#20320;&#30340;&#37096;&#20998;&#21160;&#24577;&#39029;&#26469;&#38477;&#20302;&#20320;&#30340;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#30340;&#36127;&#25285;&#12290;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; include "/cache/{$_GET['username']}.html";</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#20026;&#20102;&#35753;&#36825;&#20010;&#28431;&#27934;&#26356;&#26126;&#26174;&#65292;&#31034;&#20363;&#20013;&#20351;&#29992;&#20102;$_GET&#12290;&#22914;&#26524;&#20320;&#20351;&#29992;&#20102;&#21463;&#27745;&#26579;&#25968;&#25454;&#26102;&#65292;&#36825;&#20010;&#28431;&#27934;&#21516;&#26679;&#23384;&#22312;&#12290;&#20351;&#29992;$_GET['username']&#26159;&#19968;&#20010;&#26497;&#31471;&#30340;&#20363;&#23376;&#65292;&#36890;&#36807;&#23427;&#21487;&#20197;&#25226;&#38382;&#39064;&#30475;&#24471;&#26356;&#28165;&#26970;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; &#34429;&#28982;&#19978;&#38754;&#30340;&#27969;&#31243;&#26377;&#20854;&#20248;&#28857;&#65292;&#20294;&#23427;&#21516;&#26102;&#20026;&#25915;&#20987;&#32773;&#25552;&#20379;&#20102;&#19968;&#20010;&#21487;&#20197;&#33258;&#30001;&#36873;&#25321;&#32531;&#23384;&#39029;&#30340;&#33391;&#26426;&#12290;&#20363;&#22914;&#65292;&#19968;&#20010;&#29992;&#25143;&#21487;&#20197;&#26041;&#20415;&#22320;&#36890;&#36807;&#32534;&#36753;URL&#20013;&#30340;username&#30340;&#20540;&#26469;&#23519;&#30475;&#20854;&#20182;&#29992;&#25143;&#30340;&#32531;&#23384;&#25991;&#20214;&#12290;&#20107;&#23454;&#19978;&#65292;&#25915;&#20987;&#32773;&#21487;&#20197;&#36890;&#36807;&#31616;&#21333;&#30340;&#26356;&#25913;username&#30340;&#20540;&#20026;&#30456;&#24212;&#30340;&#25991;&#20214;&#21517;&#65288;&#19981;&#21152;&#25193;&#23637;&#21517;&#65289;&#26469;&#23519;&#30475;/cache&#30446;&#24405;&#19979;&#30340;&#25152;&#26377;&#25193;&#23637;&#21517;&#20026;.html&#30340;&#25991;&#20214;&#12290;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; http://example.org/index.php?username=filename</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#23613;&#31649;&#35813;&#31243;&#24207;&#38480;&#21046;&#20102;&#25915;&#20987;&#32773;&#25152;&#25805;&#20316;&#30340;&#30446;&#24405;&#21644;&#25991;&#20214;&#21517;&#65292;&#20294;&#21464;&#26356;&#25991;&#20214;&#21517;&#24182;&#19981;&#26159;&#21807;&#19968;&#30340;&#25163;&#27573;&#12290;&#25915;&#20987;&#32773;&#21487;&#20197;&#21019;&#36896;&#24615;&#22320;&#36798;&#21040;&#22312;&#25991;&#20214;&#31995;&#32479;&#20013;&#36827;&#34892;&#36328;&#36234;&#30340;&#30446;&#30340;&#65292;&#32780;&#21435;&#23519;&#30475;&#20854;&#20182;&#30446;&#24405;&#20013;&#30340;.html&#25991;&#20214;&#20197;&#21457;&#29616;&#25935;&#24863;&#20449;&#24687;&#12290;&#36825;&#26159;&#22240;&#20026;&#21487;&#20197;&#22312;&#23383;&#20018;&#20351;&#29992;&#29238;&#30446;&#24405;&#30340;&#26041;&#24335;&#36827;&#34892;&#30446;&#24405;&#36328;&#36234;&#65306;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; http://example.org/index.php?username=../admin/users</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp;&#19978;&#38754;URL&#30340;&#36816;&#34892;&#32467;&#26524;&#22914;&#19979;&#65306;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; include "/cache/../admin/users.html";</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#27492;&#26102;&#65292;..&#24847;&#21619;&#30528;/cache&#30340;&#29238;&#30446;&#24405;&#65292;&#20063;&#23601;&#26159;&#26681;&#30446;&#24405;&#12290;&#36825;&#26679;&#19978;&#38754;&#30340;&#20363;&#23376;&#23601;&#31561;&#20215;&#20110;&#65306;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; include "/admin/users.html";</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#30001;&#20110;&#25152;&#26377;&#30340;&#25991;&#20214;&#37117;&#20250;&#22312;&#25991;&#20214;&#31995;&#32479;&#30340;&#26681;&#30446;&#24405;&#19979;&#65292;&#35813;&#27969;&#31243;&#23601;&#20801;&#35768;&#20102;&#19968;&#20010;&#25915;&#20987;&#32773;&#33021;&#35775;&#38382;&#20320;&#26381;&#21153;&#22120;&#19978;&#25152;&#26377;&#30340;.html&#25991;&#20214;&#12290;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#22312;&#26576;&#20123;&#24179;&#21488;&#19978;&#65292;&#25915;&#20987;&#32773;&#36824;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;NULL&#26469;&#32456;&#27490;&#23383;&#31526;&#20018;&#65292;&#20363;&#22914;&#65306;</p>
<p style="line-height: 1.50;">  &nbsp; http://example.org/index.php?username=../etc/passwd%00</p>
<p style="line-height: 1.50;">  &nbsp; &#36825;&#26679;&#23601;&#25104;&#21151;&#22320;&#32469;&#24320;&#20102;.html&#25991;&#20214;&#25193;&#23637;&#21517;&#30340;&#38480;&#21046;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; &#24403;&#28982;&#65292;&#19968;&#21619;&#22320;&#21435;&#36890;&#36807;&#29468;&#27979;&#25915;&#20987;&#32773;&#30340;&#25152;&#26377;&#24694;&#24847;&#25915;&#20987;&#25163;&#27573;&#26159;&#19981;&#21487;&#33021;&#30340;&#65292;&#26080;&#35770;&#20320;&#22312;&#25991;&#20214;&#19978;&#21152;&#19978;&#22810;&#23569;&#25511;&#21046;&#65292;&#20063;&#19981;&#33021;&#25490;&#38500;&#39118;&#38505;&#12290;&#37325;&#35201;&#30340;&#26159;&#22312;&#21160;&#24577;&#21253;&#21547;&#26102;&#27704;&#36828;&#19981;&#35201;&#20351;&#29992;&#34987;&#27745;&#26579;&#25968;&#25454;&#12290;&#25915;&#20987;&#25163;&#27573;&#19981;&#26159;&#19968;&#25104;&#19981;&#21464;&#30340;&#65292;&#20294;&#28431;&#27934;&#19981;&#20250;&#21464;&#21270;&#12290;&#21482;&#35201;&#36890;&#36807;&#36807;&#28388;&#25968;&#25454;&#21363;&#21487;&#20462;&#22797;&#36825;&#20010;&#28431;&#27934;&#65288;&#35265;&#31532;&#19968;&#31456;&#65289;&#65306;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $clean = array();</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; /* $_GET['filename'] is filtered and stored in $clean['filename']. */</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; include "/path/to/{$clean['filename']}";</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#22914;&#26524;&#20320;&#30830;&#35748;&#21442;&#25968;&#20013;&#21482;&#26377;&#25991;&#20214;&#21517;&#37096;&#20998;&#32780;&#27809;&#26377;&#36335;&#24452;&#20449;&#24687;&#26102;&#65292;&#21478;&#19968;&#20010;&#26377;&#25928;&#30340;&#25216;&#24039;&#26159;&#36890;&#36807;&#20351;&#29992;basename( )&#26469;&#36827;&#34892;&#25968;&#25454;&#30340;&#36807;&#28388;&#65306;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $clean = array();</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; if (basename($_GET['filename'] == $_GET['filename'])</p>
<p style="line-height: 1.50;">  &nbsp; {</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; $clean['filename'] = $_GET['filename'];</p>
<p style="line-height: 1.50;">  &nbsp; }</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; include "/path/to/{$clean['filename']}";</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#22914;&#26524;&#20320;&#20801;&#35768;&#26377;&#36335;&#24452;&#20449;&#24687;&#20294;&#24819;&#35201;&#22312;&#26816;&#27979;&#21069;&#25226;&#23427;&#21270;&#31616;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;realpath()&#20989;&#25968;&#65306;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $filename = realpath("/path/to/{$_GET['filename']}");</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp;&#36890;&#36807;&#19978;&#38754;&#31243;&#24207;&#22788;&#29702;&#24471;&#21040;&#30340;&#32467;&#26524;&#65288;$filename&#65289;&#21487;&#20197;&#34987;&#29992;&#26469;&#30830;&#35748;&#26159;&#21542;&#20301;&#20110;/path/to&#30446;&#24405;&#19979;&#65306;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $pathinfo = pathinfo($filename);</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; if ($pathinfo['dirname'] == '/path/to')</p>
<p style="line-height: 1.50;">  &nbsp; {</p>
<p style="line-height: 1.50;">  &nbsp; &nbsp; /* $filename is within /path/to */.</p>
<p style="line-height: 1.50;">  &nbsp; }</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#22914;&#26524;&#26816;&#27979;&#19981;&#36890;&#36807;&#65292;&#20320;&#23601;&#24212;&#35813;&#25226;&#36825;&#20010;&#35831;&#27714;&#35760;&#24405;&#21040;&#25915;&#20987;&#26085;&#24535;&#20197;&#22791;&#21518;&#26597;&#12290;&#36825;&#20010;&#22312;&#20320;&#25226;&#36825;&#20010;&#27969;&#31243;&#20316;&#20026;&#28145;&#24230;&#38450;&#33539;&#25514;&#26045;&#26102;&#29305;&#21035;&#37325;&#35201;&#65292;&#22240;&#20026;&#20320;&#35201;&#30830;&#23450;&#20854;&#23427;&#30340;&#23433;&#20840;&#25163;&#27573;&#22833;&#25928;&#30340;&#21407;&#22240;&#12290;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<hr noshade size=1 ><p style="line-height: 1.50;">&nbsp;</p>

</td></tr></table>

</body>
</html>
