<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>


   <title>8.5. &#23433;&#20840;&#27169;&#24335;</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
   <meta http-equiv="Content-Style-Type" content="text/css" />
   <link type="text/css" href="default.css" rel="stylesheet" />
</head>
<body style="margin: 0px 0px 0px 0px; background: #FFFFFF;">


<table width="100%" border="0" cellspacing="0" cellpadding="5" bgcolor="#649CCC">
  <tr valign="middle">
    <td align="left">
      <p class="p_Heading1"><span class="f_Heading1">8.5. &#23433;&#20840;&#27169;&#24335;</span></p>

    </td>
    <td align="right">
     <span style="font-size: 9pt">
     <a href="introduction.htm">Top</a>&nbsp;
     <a href="new_item51.htm">Previous</a>&nbsp;
     <a href="new_item53.htm">Next</a>
     </span>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table width="100%" border="0" cellspacing="0" cellpadding="5"><tr valign="top"><td align="left">
<p style="line-height: 1.50;">8.5. &#23433;&#20840;&#27169;&#24335;</p>
<p style="line-height: 1.50;">  &nbsp; PHP&#30340;safe_mode&#36873;&#39033;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#35299;&#20915;&#26412;&#31456;&#25152;&#36848;&#30340;&#26576;&#20123;&#38382;&#39064;&#12290;&#20294;&#26159;&#65292;&#22312;PHP&#23618;&#38754;&#19978;&#21435;&#35299;&#20915;&#36825;&#31867;&#38382;&#39064;&#20174;&#26550;&#26500;&#19978;&#26469;&#30475;&#26159;&#19981;&#27491;&#30830;&#30340;&#65292;&#27491;&#22914;PHP&#25163;&#20876;&#25152;&#36848;(http://php.net/features.safe-mode)&#12290;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#24403;&#23433;&#20840;&#27169;&#24335;&#29983;&#25928;&#26102;&#65292;PHP&#20250;&#23545;&#27491;&#22312;&#25191;&#34892;&#30340;&#33050;&#26412;&#25152;&#35835;&#21462;&#65288;&#25110;&#25152;&#25805;&#20316;&#65289;&#25991;&#20214;&#30340;&#23646;&#20027;&#36827;&#34892;&#26816;&#26597;&#65292;&#20197;&#20445;&#35777;&#19982;&#35813;&#33050;&#26412;&#30340;&#23646;&#20027;&#26159;&#30456;&#21516;&#30340;&#12290;&#34429;&#28982;&#36825;&#26679;&#30830;&#23454;&#21487;&#20197;&#38450;&#33539;&#26412;&#31456;&#20013;&#30340;&#24456;&#22810;&#20363;&#23376;&#65292;&#20294;&#23427;&#19981;&#20250;&#24433;&#21709;&#20854;&#23427;&#35821;&#35328;&#32534;&#20889;&#30340;&#31243;&#24207;&#12290;&#20363;&#22914;&#65292;&#20351;&#29992;Bash&#20889;&#30340;CGI&#33050;&#26412;&#65306;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; #!/bin/bash</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; echo "Content-Type: text/plain"</p>
<p style="line-height: 1.50;">  &nbsp; echo ""</p>
<p style="line-height: 1.50;">  &nbsp; cat /home/victim/inc/db.inc</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; Bash&#35299;&#26512;&#22120;&#20250;&#21435;&#20851;&#24515;&#29978;&#33267;&#26816;&#26597;PHP&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;&#25171;&#24320;&#23433;&#20840;&#27169;&#24335;&#30340;&#37197;&#32622;&#23383;&#31526;&#20018;&#21527;&#65311;&#24403;&#28982;&#19981;&#20250;&#12290;&#21516;&#26679;&#30340;&#65292;&#35813;&#26381;&#21153;&#22120;&#25903;&#25345;&#30340;&#20854;&#23427;&#35821;&#35328;&#65292;&#22914;Perl&#65292;Python&#31561;&#37117;&#19981;&#20250;&#21435;&#20851;&#24515;&#36825;&#20010;&#12290; &nbsp; &nbsp;&#26412;&#31456;&#20013;&#30340;&#25152;&#26377;&#20363;&#23376;&#21487;&#20197;&#24456;&#31616;&#21333;&#22320;&#34987;&#25913;&#32534;&#25104;&#20854;&#23427;&#32534;&#31243;&#35821;&#35328;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; &#21478;&#19968;&#20010;&#20856;&#22411;&#30340;&#38382;&#39064;&#26159;&#23433;&#20840;&#27169;&#24335;&#19981;&#20250;&#25298;&#32477;&#23646;&#20110;WEB&#26381;&#21153;&#22120;&#25991;&#20214;&#30340;&#35775;&#38382;&#12290;&#36825;&#26159;&#30001;&#20110;&#19968;&#27573;&#33050;&#26412;&#21487;&#20197;&#29992;&#20110;&#24314;&#31435;&#21478;&#19968;&#27573;&#33050;&#26412;&#65292;&#32780;&#26032;&#33050;&#26412;&#26159;&#23646;&#20110;WEB&#26381;&#21153;&#22120;&#30340;&#65292;&#22240;&#27492;&#23427;&#21487;&#20197;&#35775;&#38382;&#25152;&#26377;&#23646;&#20110;WEB&#26381;&#21153;&#22120;&#30340;&#25991;&#20214;&#65306; </p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $filename = 'file.php';</p>
<p style="line-height: 1.50;">  &nbsp; $script = '&lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; header(\'Content-Type: text/plain\');</p>
<p style="line-height: 1.50;">  &nbsp; readfile($_GET[\'file\']);</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;';</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; file_put_contents($filename, $script);</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#19978;&#38754;&#30340;&#33050;&#26412;&#24314;&#31435;&#20102;&#19979;&#38754;&#30340;&#25991;&#20214;&#65306;</p>
<p style="line-height: 1.50;">  &nbsp; &lt;?php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; header('Content-Type: text/plain');</p>
<p style="line-height: 1.50;">  &nbsp; readfile($_GET['file']);</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; ?&gt;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#30001;&#20110;&#35813;&#25991;&#20214;&#26159;&#30001;Web&#26381;&#21153;&#22120;&#25152;&#24314;&#31435;&#30340;&#65292;&#22240;&#27492;&#23427;&#30340;&#23646;&#20027;&#26159;Web&#26381;&#21153;&#22120;&#65288;Apache&#19968;&#33324;&#20197;nobody&#29992;&#25143;&#36816;&#34892;&#65289;&#65306;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; $ ls file.php</p>
<p style="line-height: 1.50;">  &nbsp; -rw-r--r-- &nbsp;1 nobody nobody 72 May 21 12:34 file.php</p>
<p style="line-height: 1.50;">&nbsp;</p>
<p style="line-height: 1.50;">  &nbsp; &#22240;&#27492;&#65292;&#36825;&#20010;&#33050;&#26412;&#21487;&#20197;&#32469;&#36807;&#24456;&#22810;&#23433;&#20840;&#27169;&#24335;&#25152;&#25552;&#20379;&#30340;&#23433;&#20840;&#25514;&#26045;&#12290;&#21363;&#20351;&#25171;&#24320;&#20102;&#23433;&#20840;&#27169;&#24335;&#65292;&#25915;&#20987;&#32773;&#20063;&#33021;&#26174;&#31034;&#19968;&#20123;&#20449;&#24687;&#22914;&#20445;&#23384;&#22312;/tmp&#30446;&#24405;&#20869;&#30340;&#20250;&#35805;&#20449;&#24687;&#65292;&#36825;&#26159;&#30001;&#20110;&#36825;&#20123;&#25991;&#20214;&#26159;&#23646;&#20110;Web&#26381;&#21153;&#22120;&#30340;&#65288;nobody&#65289;&#12290;</p>
<p style="line-height: 1.50;">  &nbsp; PHP&#30340;&#23433;&#20840;&#27169;&#24335;&#30830;&#23454;&#36215;&#21040;&#20102;&#19968;&#20123;&#20316;&#29992;&#65292;&#21487;&#20197;&#35748;&#20026;&#23427;&#26159;&#19968;&#31181;&#28145;&#24230;&#38450;&#33539;&#26426;&#21046;&#12290;&#21487;&#26159;&#65292;&#23427;&#21482;&#25552;&#20379;&#20102;&#21487;&#24604;&#30340;&#20445;&#25252;&#65292;&#21516;&#26102;&#22312;&#26412;&#31456;&#20013;&#20063;&#27809;&#26377;&#20854;&#23427;&#23433;&#20840;&#25514;&#26045;&#26469;&#26367;&#20195;&#23427;&#12290;</p>
<p style="line-height: 1.50;">&nbsp;</p>
<hr noshade size=1 ><p style="line-height: 1.50;">&nbsp;</p>

</td></tr></table>

</body>
</html>
