<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../c3.css" />
<title>JavaScript Try...Catch 语句</title>
</head>
<body class="browserscripting">
<div id="wrapper">
<div id="header">
<a href="http://e.v-get.com/w3cschool/" style="float:left;">W3CSchool 在线教程</a>
<div class="q g"><script type="text/javascript">var cpro_id="u1163355"</script><script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script></div>
</div>
<div id="navfirst">
<ul id="menu">
<li id="h"><a href="../h.html">HTML教程</a></li>
<li id="x"><a href="../x.html">XML教程</a></li>
<li id="b"><a href="../b.html">浏览器脚本</a></li>
<li id="s"><a href="../s.html">服务器脚本</a></li>
<li id="d"><a href="../d.html">dot net教程</a></li>
<li id="m"><a href="../m.html">多媒体教程</a></li>
<li id="w"><a href="../w.html">建站手册</a></li>
</ul>
</div><div id="navsecond">
<div id="course">
<h2>JavaScript 基础</h2>
<ul>
<li><a href="http://e.v-get.com/w3cschool/">JS 教程</a></li>
<li><a href="js_intro.html">JS 简介</a></li>
<li><a href="js_howto.html">JS 实现</a></li>
<li><a href="js_whereto.html">JS 放置</a></li>
<li><a href="js_statements.html">JS 语句</a></li>
<li><a href="js_comments.html">JS 注释</a></li>
<li><a href="js_variables.html">JS 变量</a></li>
<li><a href="js_operators.html">JS 运算符</a></li>
<li><a href="js_comparisons.html">JS 比较</a></li>
<li><a href="js_if_else.html">JS If...Else</a></li>
<li><a href="js_switch.html">JS Switch</a></li>
<li><a href="js_popup.html">JS 消息框</a></li>
<li><a href="js_functions.html">JS 函数</a></li>
<li><a href="js_loop_for.html">JS For Loop</a></li>
<li><a href="js_loop_while.html">JS While Loop</a></li>
<li><a href="js_break.html">JS Break Loops</a></li>
<li><a href="js_loop_for_in.html">JS For...In</a></li>
<li><a href="js_events.html">JS 事件</a></li>
<li><a href="js_try_catch.html">JS Try...Catch</a></li>
<li><a href="js_throw.html">JS Throw</a></li>
<li><a href="js_onerror.html">JS onerror</a></li>
<li><a href="js_special_characters.html">JS 特殊字符</a></li>
<li><a href="js_guidelines.html">JS 指导方针</a></li>
</ul>
<h2>JavaScript 对象</h2>
<ul>
<li><a href="js_obj_intro.html">JS 对象简介</a></li>
<li><a href="js_obj_string.html">JS 字符串</a></li>
<li><a href="js_obj_date.html">JS 日期</a></li>
<li><a href="js_obj_array.html">JS 数组</a></li>
<li><a href="js_obj_boolean.html">JS 逻辑</a></li>
<li><a href="js_obj_math.html">JS 算数</a></li>
<li><a href="js_obj_regexp.html">JS RegExp</a></li>
<li><a href="js_obj_htmldom.html">JS HTML DOM</a></li>
</ul>
<h2>JavaScript 高级</h2>
<ul>
<li><a href="js_browser.html">JS 浏览器</a></li>
<li><a href="js_cookies.html">JS Cookies</a></li>
<li><a href="js_form_validation.html">JS 验证</a></li>
<li><a href="js_animation.html">JS 动画</a></li>
<li><a href="js_image_maps.html">JS 图像地图</a></li>
<li><a href="js_timing.html">JS 计时</a></li>
<li><a href="js_objects.html">JS 创建对象</a></li>
<li><a href="js_summary.html">JS 总结</a></li>
</ul>
<h2>实例/测验</h2>
<ul>
<li><a href="../example/jseg_examples.html">JS 实例</a></li>
<li><a href="../example/jsrf_examples.html">JS 对象实例</a></li>
<li><a href="js_quiz.html">JS 测验</a></li>
</ul>
<h2>JS 参考手册</h2>
<ul>
<li><a href="js_reference.html">JS 对象</a></li>
<li><a href="../htmldom/htmldom_reference.html">JS HTML DOM</a></li>
</ul>
</div>
<div id="selected">
<h2>建站手册</h2>
<ul>
<li><a href="../site/">网站构建</a></li>
<li><a href="../w3c/">万维网联盟</a></li>
<li><a href="http://e.v-get.com/w3c/">W3CSchool 教程</a></li>
<li><a href="../quality/">网站品质</a></li>
<li><a href="../semweb/">语义网</a></li>
<li><a href="../hosting/">网站主机</a></li>
</ul>
<h2><a href="http://e.v-get.com/w3c/" class="f13">W3CSchool 教程</a></h2><div class="a120x90"><script type="text/javascript">var cpro_id="u1210867";</script><script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script></div></div>
</div>
<div id="maincontent">
<h1>JavaScript Try...Catch 语句</h1>
<div id="tpn">
<ul class="prenext">
<li class="pre"><a href="js_events.html">上一页</a></li>
<li class="next"><a href="js_throw.html">下一页</a></li>
</ul>
</div>
<div id="intro">
<p><strong>try...catch 的作用是测试代码中的错误。</strong></p>
</div>
<div class="example">
<h2>实例</h2>
<dl>
<dt><a href="../tiy/t_294.html">try...catch 语句</a></dt>
<dd>如何编写 try...catch 语句。</dd>
<dt><a href="../tiy/t_295.html">带有确认框的 try...catch 语句</a></dt>
<dd>另一个编写 try...catch 语句的例子。</dd>
</dl>
</div>
<div>
<h2>JavaScript - 捕获错误</h2>
<p>当我们在网上冲浪时，总会看到带有 runtime 错误的 Javascript 警告框，同时会询问我们“是否进行 debug？”。像这样的错误信息或许对开发人员有用，对用户则未必。当错误发生时，他们往往会选择离开这个站点。</p>
<p>本节向你讲解如何捕获和处理 Javascript 的错误消息，这样就可以为受众提供更多的便利。</p>
<p>有两种在网页中捕获错误的方法：</p>
<ul>
<li>使用 <em>try...catch</em> 语句。(在 IE5+、Mozilla 1.0、和 Netscape 6 中可用) </li>
<li>使用 <em>onerror</em> 事件。这是用于捕获错误的老式方法。(Netscape 3 以后的版本可用)</li>
</ul>
</div>
<div>
<h2>Try...Catch 语句</h2>
<p>try...catch 可以测试代码中的错误。try 部分包含需要运行的代码，而 catch 部分包含错误发生时运行的代码。</p>
<h3>语法：</h3>
<pre>
<code>try</code>
{
   //在此运行代码
}
<code>catch(err)</code>
{
   //在此处理错误
}</pre>
<p class="important"><span>注意：</span>try...catch 使用小写字母。大写字母会出错。</p>
<h3>实例 1</h3>
<p>下面的例子原本用在用户点击按钮时显示 &#34;Welcome guest!&#34; 这个消息。不过 message() 函数中的 alert() 被误写为 adddlert()。这时错误发生了：</p>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;script type=&#34;text/javascript&#34;&gt;
function message()
{
adddlert(&#34;Welcome guest!&#34;)
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;input type=&#34;button&#34; value=&#34;View message&#34; onclick=&#34;message()&#34; /&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>我们可以添加 try...catch 语句，这样当错误发生时可以采取更适当的措施。</p>
<p>下面的例子用 try...catch 语句重新修改了脚本。由于误写了 alert()，所以错误发生了。不过这一次，catch 部分捕获到了错误，并用一段准备好的代码来处理这个错误。这段代码会显示一个自定义的出错信息来告知用户所发生的事情。</p>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;script type=&#34;text/javascript&#34;&gt;
var txt=&#34;&#34;
function message()
{
<code>try</code>
  {
  adddlert(&#34;Welcome guest!&#34;)
  }
<code>catch(err)</code>
  {
  txt=&#34;此页面存在一个错误。\n\n&#34;
  txt+=&#34;错误描述: &#34; + err.description + &#34;\n\n&#34;
  txt+=&#34;点击OK继续。\n\n&#34;
  alert(txt)
  }
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;input type=&#34;button&#34; value=&#34;View message&#34; onclick=&#34;message()&#34; /&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div>
<h2>实例 2</h2>
<p>下一个例子会显示一个确认框，让用户来选择在发生错误时点击确定按钮来继续浏览网页，还是点击取消按钮来回到首页。如果 confirm 方法的返回值为 false，代码会把用户重定向到其他的页面。如果 confirm 方法的返回值为 true，那么代码什么也不会做。</p>
<pre>&lt;html&gt;
&lt;head&gt;
&lt;script type=&#34;text/javascript&#34;&gt;
var txt=&#34;&#34;
function message()
{
<code>try</code>
  {
  adddlert(&#34;Welcome guest!&#34;)
  }
<code>catch(err)</code>
  {
  txt=&#34;There was an error on this page.\n\n&#34;
  txt+=&#34;Click OK to continue viewing this page,\n&#34;
  txt+=&#34;or Cancel to return to the home page.\n\n&#34;
  if(!confirm(txt))
    {
    document.location.href=&#34;http://e.v-get.com/&#34;
    }
  }
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;input type=&#34;button&#34; value=&#34;View message&#34; onclick=&#34;message()&#34; /&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<div>
<h2>onerror 事件</h2>
<p>我们马上会讲解 onerror 事件。但首先您需要学习如何使用 throw 语句来创建异常。throw 语句可以与 try...catch 语句一起使用。</p>
</div>
<div  id="bpn">
<ul class="prenext">
<li class="pre"><a href="js_events.html">上一页</a></li>
<li class="next"><a href="js_throw.html">下一页</a></li>
</ul>
</div>
</div>
<div id="sidebar">
<div class="rs"></div>
<div id="tools">
<h5 id="tools_reference"><a href="js_reference.html">JavaScript 参考手册</a></h5>
<h5 id="tools_example"><a href="../example/jseg_examples.html">JavaScript 实例</a></h5>
<h5 id="tools_quiz"><a href="js_quiz.html">JavaScript 测验</a></h5>
<h5 id="tools_search"><a href="../search/search.html">W3CSchool 搜索</a></h5>
</div>
<div class="a120x600"><script type="text/javascript">var cpro_id="u1293136";</script><script src="http://cpro.baidustatic.com/cpro/ui/c.js" type="text/javascript"></script></div>
</div><div class="b"></div>
</div>
</body>
</html>